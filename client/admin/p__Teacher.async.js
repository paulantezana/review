(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{F6mj:function(e,a,t){e.exports={actions:"sn-pages-teacher-index-actions",tableListForm:"sn-pages-teacher-index-tableListForm",tableListOperator:"sn-pages-teacher-index-tableListOperator"}},Odhe:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=(t("qVdP"),t("jsC+")),o=(t("Pwec"),t("CtXQ")),l=(t("lUTK"),t("BvKs")),c=(t("2qtc"),t("kLXV")),i=(t("/zsF"),t("PArb")),s=(t("5Dmo"),t("3S7+")),d=(t("+L6B"),t("2/Rp")),p=t("p0pE"),u=t.n(p),h=t("2Taf"),m=t.n(h),f=t("vZ4D"),E=t.n(f),y=t("l4Ni"),g=t.n(y),v=t("ujKo"),x=t.n(v),k=t("MhPg"),b=t.n(k),w=(t("5NDa"),t("5rEg")),C=t("q1tI"),S=t.n(C),M=t("MuoO"),I=t("zHco"),N=(t("17x9"),t("CkN6")),O=t("F6mj"),T=t.n(O),U=t("jcMW"),j=(t("fOrg"),t("+KLJ")),L=(t("DZo9"),t("8z0m")),R=L["a"].Dragger,A=function(e){function a(e){var t;return m()(this,a),t=g()(this,x()(a).call(this,e)),t.state={file:null},t}return b()(a,e),E()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.teacher,n=a.dispatch,r=a.loading,l=t.modalUploadVisible,s=function(){n({type:"teacher/toggleModalUpload",payload:!1}),e.setState({file:null})},p={name:"filestidents",uploading:r,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",showUploadList:!1,beforeUpload:function(a){return e.setState({file:a}),!1}},u=function(){n({type:"teacher/uploadteachers",payload:{file:e.state.file}})},h=function(){n({type:"teacher/downloadTemp"})},m=function(){e.setState({file:null})};return S.a.createElement("div",null,S.a.createElement(c["a"],{title:"Importar Profesores",visible:l,footer:null,onCancel:s},S.a.createElement("p",null,"Importa la informaci\xf3n de los profesores desde un archivo xlsx(Excel). El archivo xlsx se puede formatear con: dni, apellidos, nombres, fecha_nacimiento y otros campos opcionales."),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return h()}},S.a.createElement(o["a"],{type:"layout"})," Descarga la plantilla"),"y abre en Excel para ver el formato con todos los campos aceptados."),this.state.file?S.a.createElement("div",null,S.a.createElement(j["a"],{message:this.state.file.name,type:"info",closable:!0,onClose:function(){return m()}}),S.a.createElement(i["a"],{dashed:!0}),S.a.createElement(d["a"],{type:"primary",loading:r,icon:"upload",onClick:function(){return u()}},"Subir archivo")):S.a.createElement(R,p,S.a.createElement("p",{className:"ant-upload-drag-icon"},S.a.createElement(o["a"],{type:"inbox"})),S.a.createElement("p",{className:"ant-upload-text"},"Haga clic o arrastre el archivo a esta \xe1rea para cargar"),S.a.createElement("p",{className:"ant-upload-hint"},"Soporte para subir un solo archivo "))))}}]),a}(S.a.Component),D=function(e){var a=e.teacher,t=(e.global,e.loading);return{teacher:a,loading:t.effects["teacher/uploadteachers"]}},_=Object(M["connect"])(D)(A),P=(t("14J3"),t("BMrR")),K=(t("jCWc"),t("kPKH")),F=function(e){function a(e){return m()(this,a),g()(this,x()(a).call(this,e))}return b()(a,e),E()(a,[{key:"render",value:function(){var e=this.props,a=e.teacher,t=e.dispatch,n=(e.loading,a.modalExportVisible),r=function(){t({type:"teacher/toggleModalExport",payload:!1})},o=function(){t({type:"teacher/exportAllTeachers"})};return S.a.createElement("div",null,S.a.createElement(c["a"],{title:"Exportar profesores",visible:n,footer:null,onCancel:r},S.a.createElement(P["a"],{type:"flex",justify:"space-around"},S.a.createElement(K["a"],null,"Exportar datos actuales"),S.a.createElement(K["a"],null,S.a.createElement(d["a"],{type:"primary",icon:"export",onClick:function(){return o()}},"Exportar Todo")))))}}]),a}(S.a.Component),Q=function(e){var a=e.teacher,t=e.loading;return{teacher:a,loading:t.effects["teacher/uploadteachers"]}},V=Object(M["connect"])(Q)(F),z=t("3HEy"),B=w["a"].Search,H=function(e){function a(){var e,t;m()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=g()(this,(e=x()(a)).call.apply(e,[this].concat(r))),t.state={selectedRows:[],search:""},t.onQueryAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props.dispatch,n=u()({},e,{limit:e.limit});a({type:"teacher/all",payload:n})},t.onShowModalUser=function(e){var a=t.props.dispatch;a({type:"user/updateUserByID",payload:{id:e.user_id}})},t.onShowModal=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.props.dispatch;n({type:"teacher/showModal",payload:{currentItem:a,modalType:e}})},t.onShowModalExport=function(){var e=t.props.dispatch;e({type:"teacher/toggleModalExport",payload:!0})},t.onShowModalUpload=function(){var e=t.props.dispatch;e({type:"teacher/toggleModalUpload",payload:!0})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){t.setState({search:e.target.value}),t.onQueryAll({search:e.target.value})},t.handleStandardTableChange=function(e,a,n){var r=t.state.formValues,o=Object.keys(a).reduce(function(e,t){var n=u()({},e);return n[t]=getValue(a[t]),n},{}),l=u()({current_page:e.current,limit:e.pageSize,search:t.state.search},r,o);n.field&&(l.sorter="".concat(n.field,"_").concat(n.order)),t.onQueryAll(l)},t.handleMenuClick=function(e){t.props.dispatch;var a=t.state.selectedRows;if(a)switch(e.key){case"remove":console.log(a.map(function(e){return e.id}));break;default:break}},t}return b()(a,e),E()(a,[{key:"componentDidMount",value:function(){this.onQueryAll()}},{key:"render",value:function(){var e=this,a=this.props,t=a.teacher,p=a.loading,u=t.data,h=this.state.selectedRows,m=function(a){var t=e.props.dispatch;t({type:"teacher/delete",payload:a})},f=[{title:"DNI",dataIndex:"dni",key:"dni"},{title:"Apellidos",dataIndex:"last_name",key:"last_name"},{title:"Nombres",dataIndex:"first_name",key:"first_name"},{title:"Direcci\xf2n",dataIndex:"address",key:"address"},{title:"Telefono",dataIndex:"phone",key:"phone"},{title:"Especialidad",dataIndex:"specialty",key:"specialty"},{title:"Accion",key:"accion",width:"150px",render:function(a,t){return S.a.createElement("div",{className:T.a.actions},S.a.createElement(s["a"],{title:"Usuario"},S.a.createElement(d["a"],{shape:"circle",icon:"user",onClick:function(){return e.onShowModalUser(t)}})),S.a.createElement(i["a"],{type:"vertical"}),S.a.createElement(s["a"],{title:"Editar"},S.a.createElement(d["a"],{shape:"circle",type:"primary",icon:"edit",onClick:function(){return e.onShowModal("update",t)}})),S.a.createElement(i["a"],{type:"vertical"}),S.a.createElement(s["a"],{title:"Eliminar"},S.a.createElement(d["a"],{shape:"circle",type:"danger",icon:"delete",onClick:function(){c["a"].confirm({title:"\xbfEst\xe1s seguro de eliminar este registro?",content:"Profesor: ".concat(t.first_name),okText:"SI",okType:"danger",cancelText:"NO",onOk:function(){m({id:t.id})}})}})))}}],E=S.a.createElement(l["a"],{onClick:this.handleMenuClick,selectedKeys:[]},S.a.createElement(l["a"].Item,{key:"none"},"Ninguna"));return S.a.createElement(I["a"],{title:"Profesores"},S.a.createElement(n["a"],{bordered:!1},S.a.createElement("div",{className:T.a.tableList},S.a.createElement("div",{className:T.a.tableListForm},S.a.createElement(B,{placeholder:"Buscar profesor",value:this.state.search,onChange:this.handleSearch})),S.a.createElement("div",{className:T.a.tableListOperator},S.a.createElement(d["a"].Group,null,S.a.createElement(d["a"],{icon:"plus",type:"primary",onClick:function(){return e.onShowModal("create")}},"Nuevo"),S.a.createElement(d["a"],{icon:"reload",onClick:function(){return e.onQueryAll()}},"Refrescar")),S.a.createElement(d["a"].Group,null,S.a.createElement(d["a"],{icon:"upload",onClick:function(){return e.onShowModalUpload()}},"Importar"),S.a.createElement(d["a"],{icon:"export",onClick:function(){return e.onShowModalExport()}},"Exportar")),h.length>0&&S.a.createElement("span",null,S.a.createElement(r["a"],{overlay:E},S.a.createElement(d["a"],null,"Mas operaciones ",S.a.createElement(o["a"],{type:"down"}))))),S.a.createElement(U["a"],null),S.a.createElement(_,null),S.a.createElement(V,null),S.a.createElement(N["a"],{selectedRows:h,loading:p,data:u,columns:f,rowKey:function(e){return e.id},onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}),S.a.createElement(z["a"],null))))}}]),a}(C["Component"]),J=function(e){var a=e.teacher,t=e.loading;return{teacher:a,loading:t.effects["teacher/all"]}};a["default"]=Object(M["connect"])(J)(H)}}]);