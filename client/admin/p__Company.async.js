(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{eRjF:function(e,a,t){e.exports={tableListForm:"sn-pages-company-index-tableListForm",tableListOperator:"sn-pages-company-index-tableListOperator",tableListOperatorRight:"sn-pages-company-index-tableListOperatorRight",tableListOperatorLeft:"sn-pages-company-index-tableListOperatorLeft"}},kS0l:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),o=(t("+BJd"),t("mr32")),l=(t("Pwec"),t("CtXQ")),r=(t("2qtc"),t("kLXV")),c=(t("/zsF"),t("PArb")),i=(t("5Dmo"),t("3S7+")),s=(t("+L6B"),t("2/Rp")),p=(t("Awhp"),t("KrTs")),d=t("p0pE"),u=t.n(d),m=t("2Taf"),f=t.n(m),y=t("vZ4D"),h=t.n(y),E=t("l4Ni"),g=t.n(E),v=t("ujKo"),b=t.n(v),x=t("MhPg"),w=t.n(x),k=(t("5NDa"),t("5rEg")),C=t("q1tI"),S=t.n(C),M=t("MuoO"),L=t("zHco"),O=t("CkN6"),R=t("eRjF"),N=t.n(R),_=t("iMm1"),A=(t("fOrg"),t("+KLJ")),D=(t("DZo9"),t("8z0m")),I=D["a"].Dragger,T=function(e){function a(e){var t;return f()(this,a),t=g()(this,b()(a).call(this,e)),t.state={file:null},t}return w()(a,e),h()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.company,n=a.dispatch,o=a.loading,i=t.modalUploadVisible,p=function(){n({type:"company/toggleModalUpload",payload:!1}),e.setState({file:null})},d={name:"filestidents",uploading:o,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",showUploadList:!1,beforeUpload:function(a){return e.setState({file:a}),!1}},u=function(){n({type:"company/uploadCompanies",payload:{file:e.state.file}})},m=function(){n({type:"company/downloadTemp"})},f=function(){e.setState({file:null})};return S.a.createElement("div",null,S.a.createElement(r["a"],{title:"Importar Empresas",visible:i,footer:null,onCancel:p},S.a.createElement("p",null,"Importa la informaci\xf3n de las empresas desde un archivo xlsx(Excel). El archivo xlsx se puede formatear con: ruc, nombre_rason_social, direccion, gerente y otros campos opcionales."),S.a.createElement("p",null,S.a.createElement("a",{onClick:function(){return m()}},S.a.createElement(l["a"],{type:"layout"})," Descarga la plantilla"),"y abre en Excel para ver el formato con todos los campos aceptados."),this.state.file?S.a.createElement("div",null,S.a.createElement(A["a"],{message:this.state.file.name,type:"info",closable:!0,onClose:function(){return f()}}),S.a.createElement(c["a"],{dashed:!0}),S.a.createElement(s["a"],{type:"primary",loading:o,icon:"upload",onClick:function(){return u()}},"Subir archivo")):S.a.createElement(I,d,S.a.createElement("p",{className:"ant-upload-drag-icon"},S.a.createElement(l["a"],{type:"inbox"})),S.a.createElement("p",{className:"ant-upload-text"},"Haga clic o arrastre el archivo a esta \xe1rea para cargar"),S.a.createElement("p",{className:"ant-upload-hint"},"Soporte para subir un solo archivo "))))}}]),a}(S.a.Component),j=function(e){var a=e.company,t=e.loading;return{company:a,loading:t.effects["company/uploadcompanies"]}},U=Object(M["connect"])(j)(T),z=(t("14J3"),t("BMrR")),F=(t("jCWc"),t("kPKH")),P=function(e){function a(e){return f()(this,a),g()(this,b()(a).call(this,e))}return w()(a,e),h()(a,[{key:"render",value:function(){var e=this.props,a=e.company,t=e.dispatch,n=(e.loading,a.modalExportVisible),o=function(){t({type:"company/toggleModalExport",payload:!1})},l=function(){t({type:"company/exportAllCompanies"})};return S.a.createElement(r["a"],{title:"Exportar empresas",visible:n,footer:null,onCancel:o},S.a.createElement(z["a"],{type:"flex",justify:"space-around",align:"middle"},S.a.createElement(F["a"],null,S.a.createElement(s["a"],{type:"primary",icon:"export",onClick:function(){return l()}},"Exportar Todo"))))}}]),a}(S.a.Component),Q=function(e){var a=e.company,t=e.loading;return{company:a,loading:t.effects["company/uploadCompanies"]}},J=Object(M["connect"])(Q)(P),K=k["a"].Search,V=function(e){function a(){var e,t;f()(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=g()(this,(e=b()(a)).call.apply(e,[this].concat(o))),t.state={selectedRows:[],search:""},t.onQueryAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props.dispatch,n=u()({},e,{limit:e.limit});a({type:"company/all",payload:n})},t.onShowModal=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.props.dispatch;n({type:"company/showModal",payload:{currentItem:a,modalType:e}})},t.onDeleteMultiple=function(){var e=t.props.dispatch,a=t.state.selectedRows.map(function(e){return e.id});e({type:"company/deleteMultiple",payload:{ids:a}})},t.onShowModalExport=function(){var e=t.props.dispatch;e({type:"company/toggleModalExport",payload:!0})},t.onShowModalUpload=function(){var e=t.props.dispatch;e({type:"company/toggleModalUpload",payload:!0})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){t.setState({search:e.target.value}),t.onQueryAll({search:e.target.value})},t.handleStandardTableChange=function(e,a,n){var o=t.state.formValues,l=Object.keys(a).reduce(function(e,t){var n=u()({},e);return n[t]=getValue(a[t]),n},{}),r=u()({current_page:e.current,limit:e.pageSize,search:t.state.search},o,l);n.field&&(r.sorter="".concat(n.field,"_").concat(n.order)),t.onQueryAll(r)},t}return w()(a,e),h()(a,[{key:"componentDidMount",value:function(){this.onQueryAll()}},{key:"render",value:function(){var e=this,a=this.props,t=a.company,d=a.loading,u=t.data,m=this.state.selectedRows,f=(this.onDeleteMultiple,function(a){var t=e.props.dispatch;t({type:"company/delete",payload:a})}),y=[{title:"RUC",dataIndex:"ruc",key:"ruc",width:"120px"},{title:"Nombre o razon social",key:"name_social_reason",render:function(e,a){return"publico"==a.company_type?S.a.createElement(p["a"],{status:"success",text:a.name_social_reason}):"privado"==a.company_type?S.a.createElement(p["a"],{status:"warning",text:a.name_social_reason}):S.a.createElement(p["a"],{status:"default",text:a.name_social_reason})}},{title:"Direcci\xf3n",dataIndex:"address",key:"address"},{title:"Gerente",dataIndex:"manager",key:"manager"},{title:"Accion",key:"accion",width:"110px",render:function(a,t){return S.a.createElement("div",null,S.a.createElement(i["a"],{title:"Editar"},S.a.createElement(s["a"],{icon:"edit",shape:"circle",onClick:function(){return e.onShowModal("update",a)}})),S.a.createElement(c["a"],{type:"vertical"}),S.a.createElement(i["a"],{title:"Eliminar"},S.a.createElement(s["a"],{icon:"delete",shape:"circle",type:"danger",onClick:function(){r["a"].confirm({title:"\xbfEst\xe1s seguro de eliminar este registro?",content:a.nombre,okText:"SI",okType:"danger",cancelText:"NO",onOk:function(){f({id:a.id})}})}})))}}];return S.a.createElement(L["a"],{title:"Empresas"},S.a.createElement(n["a"],{bordered:!1},S.a.createElement("div",{className:N.a.tableList},S.a.createElement("div",{className:N.a.tableListForm},S.a.createElement(K,{placeholder:"Buscar empresa",value:this.state.search,onChange:this.handleSearch})),S.a.createElement("div",{className:N.a.tableListOperator},S.a.createElement("div",{className:N.a.tableListOperatorRight},S.a.createElement(s["a"].Group,null,S.a.createElement(s["a"],{icon:"plus",type:"primary",loading:d,onClick:function(){return e.onShowModal("create")}},"Nuevo"),S.a.createElement(s["a"],{loading:d,icon:"reload",onClick:function(){return e.onQueryAll()}},"Refrescar")),S.a.createElement(s["a"].Group,null,S.a.createElement(s["a"],{loading:d,icon:"upload",onClick:function(){return e.onShowModalUpload()}},"Importar"),S.a.createElement(s["a"],{loading:d,icon:"export",onClick:function(){return e.onShowModalExport()}},"Exportar"))),S.a.createElement("div",{className:N.a.tableListOperatorLeft},S.a.createElement(o["a"],{color:"gold"},S.a.createElement(l["a"],{type:"flag"})," Privado"),S.a.createElement(o["a"],{color:"green"},S.a.createElement(l["a"],{type:"flag"})," Publico"))),S.a.createElement(_["a"],null),S.a.createElement(U,null),S.a.createElement(J,null),S.a.createElement(O["a"],{selectedRows:m,loading:d,data:u,columns:y,rowKey:function(e){return e.id},onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))))}}]),a}(C["Component"]),B=function(e){var a=e.company,t=e.loading;return{company:a,loading:t.effects["company/all"]}};a["default"]=Object(M["connect"])(B)(V)}}]);